{
  "custom_summary": "Alert when NYC Taxi daily revenue exceeds threshold",
  "evaluation": {
    "source": {
      "name": "amount",
      "display": "amount",
      "aggregation": "MAX"
    },
    "comparison_operator": "GREATER_THAN",
    "threshold": {
      "value": {
        "double_value": 1000000.0
      }
    },
    "notification": {
      "retrigger_seconds": 3600,
      "notify_on_ok": false
    }
  },
  "schedule": {
    "quartz_cron_schedule": "0 0 8 * * ?",
    "timezone_id": "UTC"
  },
  "query_lines": [
    "SELECT",
    "  to_date(tpep_pickup_datetime) as date,",
    "  SUM(fare_amount) as amount",
    "FROM",
    "  `samples`.`nyctaxi`.`trips`",
    "GROUP BY",
    "  ALL",
    "ORDER BY",
    "  1 DESC"
  ]
}
